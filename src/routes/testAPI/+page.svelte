<script lang="ts">
	import { getImageRes } from "$lib/utils/files";
	import { onNavigate } from "$app/navigation";


	const img =
		"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";
	const blobToBase64 = async (blob) => {
		return new Promise<string>((resolve, reject) => {
			const reader = new FileReader();
			reader.onload = () => resolve(reader.result.split(",")[1]);
			reader.onerror = (err) => reject(err);
			reader.readAsDataURL(blob);
		});
	};
	const stuff = async () => {
		const a = await showOpenFilePicker();
		console.log(await getImageRes(a[0].name, await blobToBase64(await a[0].getFile())));
	};
</script>

<button onclick={stuff}>do everything</button>
